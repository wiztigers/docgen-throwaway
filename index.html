---
---
<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset="utf-8">
  <meta id='redirect_meta' http-equiv="refresh" content="0; url=./en/">
  <link id='redirect_link' rel="canonical" href="./en/">
  <script>
  var current_folder = window.location.pathname.replace(/[\\\/][^\\\/]*$/, '');
  // the previous affectation with the eye-bleeding regex can be read as:
  // current_folder = pathname.substring(0, pathname.lastIndexOf('/'));
  // the regex method is less readable, but works with IE<9

  var redirect_url = window.location.hostname + current_folder;
  var language = navigator.language || navigator.userLanguage;
  if (language.indexOf('fr') == 0)
       redirect_url += '/fr/';
  else redirect_url += '/en/'; // default language

  // we use <meta http-equive="refresh"> for redirection,
  // because it seems to be the least intrusive way of doing it.
  // @see https://www.w3.org/TR/WCAG20-TECHS/H76.html
  document.getElementById('redirect_meta').content='0; url='+redirect_url;
  document.getElementById('redirect_link').href=redirect_url;
  // a more "brutal" way of redirecting would be something like this:
  // window.location = redirect_url;
  </script>
  <title>Redirecting...</title>
</head>
<body>
  <h1 id='redirect_header'>Redirecting...</h1>
  <a  id='redirect_fallback' href="./en/">Click here if you are not redirected.</a>

  <script>
console.log('url1:"'+redirect_url+'"');
  document.getElementById('redirect_header').innerHTML="Redirecting to "+redirect_url+"...";
console.log('url2:"'+redirect_url+'"');
console.log('ref1:"'+document.getElementById('redirect_fallback').href+'"');
  document.getElementById('redirect_fallback').href=redirect_url;
console.log('url3:"'+redirect_url+'"');
console.log('ref2:"'+document.getElementById('redirect_fallback').href+'"');
  </script>

</body>
</html>
